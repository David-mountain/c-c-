# 哈工大OS

## 01_认识计算机

```
一张计算机的模型图。
计算机屏幕打印出"hello"，的过程描述？
"hello" ->ascii码->汇编指令->机器指令。内存->CPU
OS：是硬件与应用软件之间的一层软件。
OS管理硬件：
	CPU管理  √
	内存管理  √
	终端管理  √
	磁盘管理  √
	文件管理  √
	网络管理
	电源管理
	多核管理
	五个√是基本部分，(一台单CPU就搞明白了，然后再去扩展网络、分布式、高级OS)
```

## 02_从开机引出计算机做了写什么？

```
计算机如何工作的？ 说白了是一个计算模型。
从图灵机开始->通用图灵机->计算机(冯诺依曼存储程序思想) 即把程序存入内存中
BIOS：基本输入输出系统。
取指执行 一条一条的指令
开始的第一条指令是固化在硬件中的，
磁盘 引导扇区读入512字节，(磁盘0扇区)
引导扇区的代码：bootsect.s(汇编代码)
512MB是什么代码呢？
汇编比C好的原因是：可以精准的控制内存。
启动盘：boot扇区  setup的4扇 system模块(OS代码)
然后到system模块。
```

## 03_OS启动

```
OS装在硬盘上的，计算机取指执行，必须将代码放在内存中，才能取指执行，所以刚开始不能OS启动。
OS -> 代码加载进内存中，才能取指执行。

bootsect.s 引导代码读入
取指执行 setup.s 
为什么叫setup ? 意思是要接管硬件了。
获取的内存大小，由创建的表管理，索引寻找。

由实模式->保护模式。
32位模式也叫保护模式，启动了32位寻址模式。
从取址->选址(表在索引中)
gdt表(全局描述符表) setup之前会初始化出来的。
setup做了哪些事？
	1. 读硬件
	2. 挪动system到00地址
	3. 启动保护模式
跳到system模块继续执行。

跳到system模块的 head.s(这是32位汇编了，不是之前的16位汇编了，后面还有个嵌入汇编) 
linux/Makefile 控制
然后是汇编跳C语言函数，本身C语言就会转成汇编的，这是其实就是汇编跳汇编。
这里会不断压栈，main函数不会退出的。
main的主要工作：内存 终中断 设备 时钟 CPU等等的初始化。

明白一个内存初始化，其他自己举一反三。
4K 页。mem_map的数组。内存前面的已经被OS使用了，后面没用的赋值0。
然后OS开始工作了。

总结：开机就做两件事。
1. 读入内存 (才能取指执行，发挥功能)
2. 初始化完成(管理硬件的软件，所以需要软件初始化，获取到硬件的参数数据)
```

